import streamlit as st
import pandas as pd
import plotly.graph_objects as go
from geopy.geocoders import Nominatim
from time import sleep
import folium
from folium.plugins import MarkerCluster
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.colors as mcolors

st.title( "stremlit try:sunglasses:")

st.write("Rafi Hirsch")

st.title("My Flourish Visualization")

data = pd.DataFrame([
 #   {"שם עיר": "אופקים", "סך תושבים": 19747, "ממוצע שנות לימוד": 12.67, "אחוז אקדמאים": "16%"},
    {"שם עיר": "ירושלים", "סך תושבים": 498671, "ממוצע שנות לימוד": 12.62, "אחוז אקדמאים": "20%"},
    {"שם עיר": "אור יהודה", "סך תושבים": 20934, "ממוצע שנות לימוד": 12.32, "אחוז אקדמאים": "16%"},
    {"שם עיר": "אור עקיבא", "סך תושבים": 12282, "ממוצע שנות לימוד": 12.71, "אחוז אקדמאים": "21%"},
    {"שם עיר": "אילת", "סך תושבים": 37649, "ממוצע שנות לימוד": 12.65, "אחוז אקדמאים": "17%"},
    {"שם עיר": "אלעד", "סך תושבים": 21777, "ממוצע שנות לימוד": 12.62, "אחוז אקדמאים": "10%"},
    {"שם עיר": "אריאל", "סך תושבים": 11099, "ממוצע שנות לימוד": 13.62, "אחוז אקדמאים": "32%"},
    {"שם עיר": "אשדוד", "סך תושבים": 126697, "ממוצע שנות לימוד": 12.96, "אחוז אקדמאים": "22%"},
    {"שם עיר": "אשקלון", "סך תושבים": 85893, "ממוצע שנות לימוד": 12.94, "אחוז אקדמאים": "24%"},
    {"שם עיר": "באר יעקב", "סך תושבים": 15403, "ממוצע שנות לימוד": 13.41, "אחוז אקדמאים": "33%"},
    {"שם עיר": "באר שבע", "סך תושבים": 119251, "ממוצע שנות לימוד": 13.19, "אחוז אקדמאים": "26%"},
    {"שם עיר": "בית שמש", "סך תושבים": 65424, "ממוצע שנות לימוד": 12.61, "אחוז אקדמאים": "15%"},
    {"שם עיר": "ביתר עילית", "סך תושבים": 27376, "ממוצע שנות לימוד": 12.48, "אחוז אקדמאים": "8%"},
    {"שם עיר": "בני ברק", "סך תושבים": 94179, "ממוצע שנות לימוד": 12.56, "אחוז אקדמאים": "8%"},
    {"שם עיר": "בת ים", "סך תושבים": 72172, "ממוצע שנות לימוד": 12.63, "אחוז אקדמאים": "21%"},
    {"שם עיר": "גבעת זאב", "סך תושבים": 10227, "ממוצע שנות לימוד": 13.17, "אחוז אקדמאים": "22%"},
    {"שם עיר": "גבעת שמואל", "סך תושבים": 15141, "ממוצע שנות לימוד": 14.68, "אחוז אקדמאים": "51%"},
    {"שם עיר": "גבעתיים", "סך תושבים": 33675, "ממוצע שנות לימוד": 14.70, "אחוז אקדמאים": "54%"},
    {"שם עיר": "גדרה", "סך תושבים": 15987, "ממוצע שנות לימוד": 13.73, "אחוז אקדמאים": "36%"},
    {"שם עיר": "גן יבנה", "סך תושבים": 14744, "ממוצע שנות לימוד": 13.49, "אחוז אקדמאים": "30%"},
    {"שם עיר": "גני תקווה", "סך תושבים": 12214, "ממוצע שנות לימוד": 14.35, "אחוז אקדמאים": "48%"},
    {"שם עיר": "דימונה", "סך תושבים": 22607, "ממוצע שנות לימוד": 12.59, "אחוז אקדמאים": "15%"},
    {"שם עיר": "הוד השרון", "סך תושבים": 36356, "ממוצע שנות לימוד": 14.30, "אחוז אקדמאים": "47%"},
    {"שם עיר": "הרצלייה", "סך תושבים": 56034, "ממוצע שנות לימוד": 14.12, "אחוז אקדמאים": "44%"},
    {"שם עיר": "זכרון יעקב", "סך תושבים": 13719, "ממוצע שנות לימוד": 14.39, "אחוז אקדמאים": "44%"},
    {"שם עיר": "חדרה", "סך תושבים": 58087, "ממוצע שנות לימוד": 12.99, "אחוז אקדמאים": "25%"},
    {"שם עיר": "חולון", "סך תושבים": 106843, "ממוצע שנות לימוד": 13.01, "אחוז אקדמאים": "25%"},
    {"שם עיר": "חיפה", "סך תושבים": 156365, "ממוצע שנות לימוד": 13.83, "אחוז אקדמאים": "38%"},
    {"שם עיר": "חריש", "סך תושבים": 14342, "ממוצע שנות לימוד": 13.34, "אחוז אקדמאים": "30%"},
    {"שם עיר": "טבריה", "סך תושבים": 27209, "ממוצע שנות לימוד": 12.43, "אחוז אקדמאים": "14%"},
    {"שם עיר": "טירת כרמל", "סך תושבים": 16340, "ממוצע שנות לימוד": 12.77, "אחוז אקדמאים": "22%"},
    # Add more rows as needed...
])
# Coordinates extracted from the geocoding results
coordinates = {
    "אור יהודה": (32.0270045, 34.8629898),
    "אור עקיבא": (32.5090151, 34.9195677),
    "אילת": (29.5569348, 34.9497949),
    "אלעד": (32.0500659, 34.9521522),
    "ירושלים": (31.7901047, 35.2032791),
    "אריאל": (32.101755, 35.174367),
    "אשדוד": (31.7977314, 34.6529922),
    "אשקלון": (31.6644874, 34.5730157),
    "באר יעקב": (31.9443532, 34.8398648),
    "באר שבע": (31.2457442, 34.7925181),
    "בית שמש": (31.746214, 34.9886825),
    "ביתר עילית": (31.6995816, 35.1061772),
    "בני ברק": (32.0873899, 34.8324376),
    "בת ים": (32.0154565, 34.7505283),
    "גבעת שמואל": (32.0769463, 34.8524656),
    "גבעתיים": (32.0729606, 34.8113279),
    "גדרה": (31.8117747, 34.7803882),
    "גן יבנה": (31.787109, 34.7096635),
    "גני תקווה": (32.0604256, 34.8760954),
    "דימונה": (31.0686612, 35.0366482),
    "הוד השרון": (32.1561974, 34.8930354),
    "זכרון יעקב": (32.5711587, 34.9529966),
    "חדרה": (32.43699, 34.9198258),
    "חולון": (32.0193121, 34.7804076),
    "חיפה": (32.8191218, 34.9983856),
    "חריש": (32.45964, 35.0510843),
    "טבריה": (32.7938522, 35.5328566),
    "טירת כרמל": (32.7613834, 34.9715506),
    # Add more cities as needed...
}

# Add latitude and longitude columns
data["Latitude"] = data["שם עיר"].map(lambda city: coordinates[city][0] if city in coordinates else None)
data["Longitude"] = data["שם עיר"].map(lambda city: coordinates[city][1] if city in coordinates else None)


# Remove cities without coordinates
data = data.dropna(subset=["Latitude", "Longitude"])
